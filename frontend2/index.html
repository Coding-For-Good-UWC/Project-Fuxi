<html>
	<h1>Login</h1>
	<form id="loginForm">
		<input type="text" placeholder="Username" id="inputUsername">
		<input type="password" placeholder="Password" id="inputPassword">
		<button type="submit">Login</button>
	</form>
	<script>
		let loginFn = async (evt) => {
			evt.preventDefault()
			let username = document.getElementById('inputUsername').value
			let password = document.getElementById('inputPassword').value
			let result = await fetch('http://localhost:8080/v1/user/login', {
				method: 'POST',
				credentials: 'include',
				headers: {
					'Content-Type': 'application/json',
				},
				body: JSON.stringify(
					{
						"username": username,
						"password": password
					}
				)
			}).then(res => res.json())
			if (result.status !== 'ok'){
				alert(result.error_message)
			} else {
				//location.href="http://localhost/player.html"
			}
			return false
		}
		var loginForm = document.getElementById("loginForm");
		loginForm.addEventListener('submit', loginFn);
	</script>
</html>